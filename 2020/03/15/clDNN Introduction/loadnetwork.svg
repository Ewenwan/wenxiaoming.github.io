<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentScriptType="application/ecmascript" contentStyleType="text/css" height="1562px" preserveAspectRatio="none" style="width:2770px;height:1562px;" version="1.1" viewBox="0 0 2770 1562" width="2770px" zoomAndPan="magnify"><defs><filter height="300%" id="f1eybgueyhrd58" width="300%" x="-1" y="-1"><feGaussianBlur result="blurOut" stdDeviation="2.0"/><feColorMatrix in="blurOut" result="blurOut2" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 .4 0"/><feOffset dx="4.0" dy="4.0" in="blurOut2" result="blurOut3"/><feBlend in="SourceGraphic" in2="blurOut3" mode="normal"/></filter></defs><g><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="92" x="1341.75" y="26.0439">LoadNetwork</text><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="29" x2="29" y1="74.2402" y2="1519.2231"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="127.5" x2="127.5" y1="74.2402" y2="1519.2231"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="274" x2="274" y1="74.2402" y2="1519.2231"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="381" x2="381" y1="74.2402" y2="1519.2231"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="577.5" x2="577.5" y1="74.2402" y2="1519.2231"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="728.5" x2="728.5" y1="74.2402" y2="1519.2231"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="889.5" x2="889.5" y1="74.2402" y2="1519.2231"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="1023.5" x2="1023.5" y1="74.2402" y2="1519.2231"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="1125.5" x2="1125.5" y1="74.2402" y2="1519.2231"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="1239.5" x2="1239.5" y1="74.2402" y2="1519.2231"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="1337.5" x2="1337.5" y1="74.2402" y2="1519.2231"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="1435.5" x2="1435.5" y1="74.2402" y2="1519.2231"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="1533.5" x2="1533.5" y1="74.2402" y2="1519.2231"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="1677.5" x2="1677.5" y1="74.2402" y2="1519.2231"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="1798.5" x2="1798.5" y1="74.2402" y2="1519.2231"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="1936.5" x2="1936.5" y1="74.2402" y2="1519.2231"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="2066.5" x2="2066.5" y1="74.2402" y2="1519.2231"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="2210.5" x2="2210.5" y1="74.2402" y2="1519.2231"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="2382.5" x2="2382.5" y1="74.2402" y2="1519.2231"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="2524.5" x2="2524.5" y1="74.2402" y2="1519.2231"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="2639.5" x2="2639.5" y1="74.2402" y2="1519.2231"/><rect fill="#FEFECE" filter="url(#f1eybgueyhrd58)" height="33.1201" style="stroke: #A80036; stroke-width: 1.5;" width="38" x="8" y="36.1201"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="24" x="15" y="59.1641">app</text><rect fill="#FEFECE" filter="url(#f1eybgueyhrd58)" height="33.1201" style="stroke: #A80036; stroke-width: 1.5;" width="38" x="8" y="1518.2231"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="24" x="15" y="1541.2671">app</text><rect fill="#FEFECE" filter="url(#f1eybgueyhrd58)" height="33.1201" style="stroke: #A80036; stroke-width: 1.5;" width="45" x="103.5" y="36.1201"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="31" x="110.5" y="59.1641">Core</text><rect fill="#FEFECE" filter="url(#f1eybgueyhrd58)" height="33.1201" style="stroke: #A80036; stroke-width: 1.5;" width="45" x="103.5" y="1518.2231"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="31" x="110.5" y="1541.2671">Core</text><rect fill="#FEFECE" filter="url(#f1eybgueyhrd58)" height="33.1201" style="stroke: #A80036; stroke-width: 1.5;" width="96" x="224" y="36.1201"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="82" x="231" y="59.1641">clDNNEngine</text><rect fill="#FEFECE" filter="url(#f1eybgueyhrd58)" height="33.1201" style="stroke: #A80036; stroke-width: 1.5;" width="96" x="224" y="1518.2231"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="82" x="231" y="1541.2671">clDNNEngine</text><rect fill="#FEFECE" filter="url(#f1eybgueyhrd58)" height="33.1201" style="stroke: #A80036; stroke-width: 1.5;" width="90" x="334" y="36.1201"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="76" x="341" y="59.1641">engine_impl</text><rect fill="#FEFECE" filter="url(#f1eybgueyhrd58)" height="33.1201" style="stroke: #A80036; stroke-width: 1.5;" width="90" x="334" y="1518.2231"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="76" x="341" y="1541.2671">engine_impl</text><rect fill="#FEFECE" filter="url(#f1eybgueyhrd58)" height="33.1201" style="stroke: #A80036; stroke-width: 1.5;" width="121" x="515.5" y="36.1201"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="107" x="522.5" y="59.1641">register_gpu.cpp</text><rect fill="#FEFECE" filter="url(#f1eybgueyhrd58)" height="33.1201" style="stroke: #A80036; stroke-width: 1.5;" width="121" x="515.5" y="1518.2231"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="107" x="522.5" y="1541.2671">register_gpu.cpp</text><rect fill="#FEFECE" filter="url(#f1eybgueyhrd58)" height="33.1201" style="stroke: #A80036; stroke-width: 1.5;" width="153" x="650.5" y="36.1201"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="139" x="657.5" y="59.1641">attach_activation_gpu</text><rect fill="#FEFECE" filter="url(#f1eybgueyhrd58)" height="33.1201" style="stroke: #A80036; stroke-width: 1.5;" width="153" x="650.5" y="1518.2231"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="139" x="657.5" y="1541.2671">attach_activation_gpu</text><rect fill="#FEFECE" filter="url(#f1eybgueyhrd58)" height="33.1201" style="stroke: #A80036; stroke-width: 1.5;" width="140" x="817.5" y="36.1201"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="126" x="824.5" y="59.1641">CLDNNExecNetwork</text><rect fill="#FEFECE" filter="url(#f1eybgueyhrd58)" height="33.1201" style="stroke: #A80036; stroke-width: 1.5;" width="140" x="817.5" y="1518.2231"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="126" x="824.5" y="1541.2671">CLDNNExecNetwork</text><rect fill="#FEFECE" filter="url(#f1eybgueyhrd58)" height="33.1201" style="stroke: #A80036; stroke-width: 1.5;" width="100" x="971.5" y="36.1201"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="86" x="978.5" y="59.1641">CLDNNGraph</text><rect fill="#FEFECE" filter="url(#f1eybgueyhrd58)" height="33.1201" style="stroke: #A80036; stroke-width: 1.5;" width="100" x="971.5" y="1518.2231"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="86" x="978.5" y="1541.2671">CLDNNGraph</text><rect fill="#FEFECE" filter="url(#f1eybgueyhrd58)" height="33.1201" style="stroke: #A80036; stroke-width: 1.5;" width="68" x="1089.5" y="36.1201"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="54" x="1096.5" y="59.1641">Program</text><rect fill="#FEFECE" filter="url(#f1eybgueyhrd58)" height="33.1201" style="stroke: #A80036; stroke-width: 1.5;" width="68" x="1089.5" y="1518.2231"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="54" x="1096.5" y="1541.2671">Program</text><rect fill="#FEFECE" filter="url(#f1eybgueyhrd58)" height="33.1201" style="stroke: #A80036; stroke-width: 1.5;" width="68" x="1203.5" y="36.1201"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="54" x="1210.5" y="59.1641">topology</text><rect fill="#FEFECE" filter="url(#f1eybgueyhrd58)" height="33.1201" style="stroke: #A80036; stroke-width: 1.5;" width="68" x="1203.5" y="1518.2231"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="54" x="1210.5" y="1541.2671">topology</text><rect fill="#FEFECE" filter="url(#f1eybgueyhrd58)" height="33.1201" style="stroke: #A80036; stroke-width: 1.5;" width="101" x="1285.5" y="36.1201"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="87" x="1292.5" y="59.1641">topology_impl</text><rect fill="#FEFECE" filter="url(#f1eybgueyhrd58)" height="33.1201" style="stroke: #A80036; stroke-width: 1.5;" width="101" x="1285.5" y="1518.2231"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="87" x="1292.5" y="1541.2671">topology_impl</text><rect fill="#FEFECE" filter="url(#f1eybgueyhrd58)" height="33.1201" style="stroke: #A80036; stroke-width: 1.5;" width="67" x="1400.5" y="36.1201"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="53" x="1407.5" y="59.1641">program</text><rect fill="#FEFECE" filter="url(#f1eybgueyhrd58)" height="33.1201" style="stroke: #A80036; stroke-width: 1.5;" width="67" x="1400.5" y="1518.2231"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="53" x="1407.5" y="1541.2671">program</text><rect fill="#FEFECE" filter="url(#f1eybgueyhrd58)" height="33.1201" style="stroke: #A80036; stroke-width: 1.5;" width="100" x="1481.5" y="36.1201"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="86" x="1488.5" y="59.1641">program_impl</text><rect fill="#FEFECE" filter="url(#f1eybgueyhrd58)" height="33.1201" style="stroke: #A80036; stroke-width: 1.5;" width="100" x="1481.5" y="1518.2231"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="86" x="1488.5" y="1541.2671">program_impl</text><rect fill="#FEFECE" filter="url(#f1eybgueyhrd58)" height="33.1201" style="stroke: #A80036; stroke-width: 1.5;" width="108" x="1621.5" y="36.1201"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="94" x="1628.5" y="59.1641">pass_manager</text><rect fill="#FEFECE" filter="url(#f1eybgueyhrd58)" height="33.1201" style="stroke: #A80036; stroke-width: 1.5;" width="108" x="1621.5" y="1518.2231"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="94" x="1628.5" y="1541.2671">pass_manager</text><rect fill="#FEFECE" filter="url(#f1eybgueyhrd58)" height="33.1201" style="stroke: #A80036; stroke-width: 1.5;" width="107" x="1743.5" y="36.1201"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="93" x="1750.5" y="59.1641">compile_graph</text><rect fill="#FEFECE" filter="url(#f1eybgueyhrd58)" height="33.1201" style="stroke: #A80036; stroke-width: 1.5;" width="107" x="1743.5" y="1518.2231"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="93" x="1750.5" y="1541.2671">compile_graph</text><rect fill="#FEFECE" filter="url(#f1eybgueyhrd58)" height="33.1201" style="stroke: #A80036; stroke-width: 1.5;" width="140" x="1864.5" y="36.1201"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="126" x="1871.5" y="59.1641">primitive_type_base</text><rect fill="#FEFECE" filter="url(#f1eybgueyhrd58)" height="33.1201" style="stroke: #A80036; stroke-width: 1.5;" width="140" x="1864.5" y="1518.2231"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="126" x="1871.5" y="1541.2671">primitive_type_base</text><rect fill="#FEFECE" filter="url(#f1eybgueyhrd58)" height="33.1201" style="stroke: #A80036; stroke-width: 1.5;" width="93" x="2018.5" y="36.1201"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="79" x="2025.5" y="59.1641">reorder_gpu</text><rect fill="#FEFECE" filter="url(#f1eybgueyhrd58)" height="33.1201" style="stroke: #A80036; stroke-width: 1.5;" width="93" x="2018.5" y="1518.2231"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="79" x="2025.5" y="1541.2671">reorder_gpu</text><rect fill="#FEFECE" filter="url(#f1eybgueyhrd58)" height="33.1201" style="stroke: #A80036; stroke-width: 1.5;" width="166" x="2125.5" y="36.1201"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="152" x="2132.5" y="59.1641">reorder_kernel_selector</text><rect fill="#FEFECE" filter="url(#f1eybgueyhrd58)" height="33.1201" style="stroke: #A80036; stroke-width: 1.5;" width="166" x="2125.5" y="1518.2231"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="152" x="2132.5" y="1541.2671">reorder_kernel_selector</text><rect fill="#FEFECE" filter="url(#f1eybgueyhrd58)" height="33.1201" style="stroke: #A80036; stroke-width: 1.5;" width="150" x="2305.5" y="36.1201"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="136" x="2312.5" y="59.1641">kernel_selector_base</text><rect fill="#FEFECE" filter="url(#f1eybgueyhrd58)" height="33.1201" style="stroke: #A80036; stroke-width: 1.5;" width="150" x="2305.5" y="1518.2231"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="136" x="2312.5" y="1541.2671">kernel_selector_base</text><rect fill="#FEFECE" filter="url(#f1eybgueyhrd58)" height="33.1201" style="stroke: #A80036; stroke-width: 1.5;" width="106" x="2469.5" y="36.1201"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="92" x="2476.5" y="59.1641">kernels_cache</text><rect fill="#FEFECE" filter="url(#f1eybgueyhrd58)" height="33.1201" style="stroke: #A80036; stroke-width: 1.5;" width="106" x="2469.5" y="1518.2231"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="92" x="2476.5" y="1541.2671">kernels_cache</text><rect fill="#FEFECE" filter="url(#f1eybgueyhrd58)" height="33.1201" style="stroke: #A80036; stroke-width: 1.5;" width="96" x="2589.5" y="36.1201"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="82" x="2596.5" y="59.1641">opencl driver</text><rect fill="#FEFECE" filter="url(#f1eybgueyhrd58)" height="33.1201" style="stroke: #A80036; stroke-width: 1.5;" width="96" x="2589.5" y="1518.2231"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="82" x="2596.5" y="1541.2671">opencl driver</text><polygon fill="#A80036" points="116,103.9946,126,107.9946,116,111.9946,120,107.9946" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="29" x2="122" y1="107.9946" y2="107.9946"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="75" x="36" y="103.1382">LoadNetwork</text><polygon fill="#A80036" points="262,135.749,272,139.749,262,143.749,266,139.749" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="128" x2="268" y1="139.749" y2="139.749"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="122" x="135" y="134.8926">LoadExeNetworkImpl</text><polygon fill="#A80036" points="369,149.749,379,153.749,369,157.749,373,153.749" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="274" x2="375" y1="153.749" y2="153.749"/><polygon fill="#A80036" points="566,186.5034,576,190.5034,566,194.5034,570,190.5034" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="381" x2="572" y1="190.5034" y2="190.5034"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="173" x="388" y="185.647">register_implementations_gpu</text><path d="M583,166.749 L583,193.749 L724,193.749 L724,176.749 L714,166.749 L583,166.749 " fill="#ADD8E6" filter="url(#f1eybgueyhrd58)" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M714,166.749 L714,176.749 L724,176.749 L714,166.749 " fill="#ADD8E6" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="116" x="589" y="186.647">// Register all kernel</text><polygon fill="#A80036" points="717,228.2578,727,232.2578,717,236.2578,721,232.2578" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="578" x2="723" y1="232.2578" y2="232.2578"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="23" x="585" y="227.4014">new</text><path d="M734,208.5034 L734,235.5034 L859,235.5034 L859,218.5034 L849,208.5034 L734,208.5034 " fill="#ADD8E6" filter="url(#f1eybgueyhrd58)" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M849,208.5034 L849,218.5034 L859,218.5034 L849,208.5034 " fill="#ADD8E6" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="104" x="740" y="228.4014">Register all kernel</text><polygon fill="#A80036" points="877.5,265.0122,887.5,269.0122,877.5,273.0122,881.5,269.0122" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="274" x2="883.5" y1="269.0122" y2="269.0122"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="23" x="281" y="264.1558">new</text><polygon fill="#A80036" points="1011.5,296.7666,1021.5,300.7666,1011.5,304.7666,1015.5,300.7666" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="889.5" x2="1017.5" y1="300.7666" y2="300.7666"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="23" x="896.5" y="295.9102">new</text><polygon fill="#A80036" points="1113.5,333.521,1123.5,337.521,1113.5,341.521,1117.5,337.521" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="1023.5" x2="1119.5" y1="337.521" y2="337.521"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="78" x="1030.5" y="332.6646">BuildProgram</text><path d="M1130,313.7666 L1130,340.7666 L1242,340.7666 L1242,323.7666 L1232,313.7666 L1130,313.7666 " fill="#ADD8E6" filter="url(#f1eybgueyhrd58)" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M1232,313.7666 L1232,323.7666 L1242,323.7666 L1232,313.7666 " fill="#ADD8E6" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="91" x="1136" y="333.6646">Create Program</text><line style="stroke: #A80036; stroke-width: 1.0;" x1="1125.5" x2="1167.5" y1="399.407" y2="399.407"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="1167.5" x2="1167.5" y1="399.407" y2="412.407"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="1126.5" x2="1167.5" y1="412.407" y2="412.407"/><polygon fill="#A80036" points="1136.5,408.407,1126.5,412.407,1136.5,416.407,1132.5,412.407" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="78" x="1132.5" y="394.5505">BuildProgram</text><path d="M1222,355.521 L1222,436.521 L1412,436.521 L1412,365.521 L1402,355.521 L1222,355.521 " fill="#ADD8E6" filter="url(#f1eybgueyhrd58)" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M1402,355.521 L1402,365.521 L1412,365.521 L1402,355.521 " fill="#ADD8E6" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="169" x="1228" y="375.4189">Create Program from network</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="102" x="1228" y="393.1733">// 1. create inputs</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="111" x="1228" y="410.9277">// 2. traverse layers</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="168" x="1228" y="428.6821">// 3. Handle output reordering</text><polygon fill="#A80036" points="1227.5,465.293,1237.5,469.293,1227.5,473.293,1231.5,469.293" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="1125.5" x2="1233.5" y1="469.293" y2="469.293"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="23" x="1132.5" y="464.4365">new</text><line style="stroke: #A80036; stroke-width: 1.0;" x1="1125.5" x2="1167.5" y1="501.0474" y2="501.0474"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="1167.5" x2="1167.5" y1="501.0474" y2="514.0474"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="1126.5" x2="1167.5" y1="514.0474" y2="514.0474"/><polygon fill="#A80036" points="1136.5,510.0474,1126.5,514.0474,1136.5,518.0474,1132.5,514.0474" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="100" x="1132.5" y="496.1909">AddInputPrimitive</text><polygon fill="#A80036" points="1227.5,546.8018,1237.5,550.8018,1227.5,554.8018,1231.5,550.8018" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="1125.5" x2="1233.5" y1="550.8018" y2="550.8018"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="75" x="1132.5" y="545.9453">add_primitive</text><path d="M1244,527.0474 L1244,554.0474 L1461,554.0474 L1461,537.0474 L1451,527.0474 L1244,527.0474 " fill="#ADD8E6" filter="url(#f1eybgueyhrd58)" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M1451,527.0474 L1451,537.0474 L1461,537.0474 L1451,527.0474 " fill="#ADD8E6" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="196" x="1250" y="546.9453">Add input primitive to the topology</text><polygon fill="#A80036" points="1326,583.5562,1336,587.5562,1326,591.5562,1330,587.5562" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="1239.5" x2="1332" y1="587.5562" y2="587.5562"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="21" x="1246.5" y="582.6997">add</text><polygon fill="#A80036" points="1424,615.3105,1434,619.3105,1424,623.3105,1428,619.3105" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="1125.5" x2="1430" y1="619.3105" y2="619.3105"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="23" x="1132.5" y="614.4541">new</text><polygon fill="#A80036" points="392,647.0649,382,651.0649,392,655.0649,388,651.0649" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="386" x2="1435" y1="651.0649" y2="651.0649"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="81" x="398" y="646.2085">build_program</text><polygon fill="#A80036" points="1521.5,799.2229,1531.5,803.2229,1521.5,807.2229,1525.5,803.2229" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="381" x2="1527.5" y1="803.2229" y2="803.2229"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="81" x="388" y="798.3665">build_program</text><path d="M1538,664.0649 L1538,922.0649 L1871,922.0649 L1871,674.0649 L1861,664.0649 L1538,664.0649 " fill="#ADD8E6" filter="url(#f1eybgueyhrd58)" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M1861,664.0649 L1861,674.0649 L1871,674.0649 L1861,664.0649 " fill="#ADD8E6" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="312" x="1544" y="683.9629">// Create graph for program then do graph optimization</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="296" x="1544" y="701.7173">void program_impl::build_program(bool is_internal) {</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="68" x="1560" y="719.4717">init_graph();</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="200" x="1560" y="737.2261">{ pre_optimize_graph(is_internal); }</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="142" x="1560" y="754.9805">run_graph_compilation();</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="207" x="1560" y="772.7349">{ post_optimize_graph(is_internal); }</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="196" x="1560" y="790.4893">prepare_memory_dependencies();</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="187" x="1560" y="808.2437">engine-&gt;compile_program(*this);</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="0" x="1548" y="825.998"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="80" x="1560" y="843.7524">if (!is_internal)</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="211" x="1576" y="861.5068">prim_info = get_current_stage_info();</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="0" x="1548" y="879.2612"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="57" x="1560" y="897.0156">cleanup();</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="4" x="1544" y="914.77">}</text><line style="stroke: #A80036; stroke-width: 1.0;" x1="1533.5" x2="1575.5" y1="955.3809" y2="955.3809"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="1575.5" x2="1575.5" y1="955.3809" y2="968.3809"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="1534.5" x2="1575.5" y1="968.3809" y2="968.3809"/><polygon fill="#A80036" points="1544.5,964.3809,1534.5,968.3809,1544.5,972.3809,1540.5,968.3809" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="130" x="1540.5" y="950.5244">run_graph_compilation</text><polygon fill="#A80036" points="1665.5,996.1353,1675.5,1000.1353,1665.5,1004.1353,1669.5,1000.1353" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="1533.5" x2="1671.5" y1="1000.1353" y2="1000.1353"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="18" x="1540.5" y="995.2788">run</text><polygon fill="#A80036" points="1787,1121.6616,1797,1125.6616,1787,1129.6616,1791,1125.6616" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="1677.5" x2="1793" y1="1125.6616" y2="1125.6616"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="18" x="1684.5" y="1120.8052">run</text><path d="M1804,1013.1353 L1804,1218.1353 L2481,1218.1353 L2481,1023.1353 L2471,1013.1353 L1804,1013.1353 " fill="#ADD8E6" filter="url(#f1eybgueyhrd58)" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M2471,1013.1353 L2471,1023.1353 L2481,1023.1353 L2471,1013.1353 " fill="#ADD8E6" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="115" x="1810" y="1033.0332">// 创建opencl kernel</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="250" x="1810" y="1050.7876">void compile_graph::run(program_impl&amp; p) {</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="255" x="1826" y="1068.542">for (auto&amp; node : p.get_processing_order()) {</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="391" x="1842" y="1086.2964">if (!node-&gt;is_type&lt;internal_primitive&gt;() &amp;&amp; !node-&gt;is_type&lt;data&gt;()) {</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="155" x="1858" y="1104.0508">node-&gt;get_output_layout();</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="608" x="1858" y="1121.8052">if (!node-&gt;is_type&lt;data&gt;() &amp;&amp; !(node-&gt;is_type&lt;mutable_data&gt;() &amp;&amp; node-&gt;get_dependencies().empty())) {</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="429" x="1874" y="1139.5596">node-&gt;selected_impl = node-&gt;type()-&gt;choose_impl(p.get_engine(), *node);</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="4" x="1858" y="1157.314">}</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="4" x="1842" y="1175.0684">}</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="4" x="1826" y="1192.8228">}</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="4" x="1810" y="1210.5771">}</text><polygon fill="#A80036" points="1924.5,1247.188,1934.5,1251.188,1924.5,1255.188,1928.5,1251.188" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="1799" x2="1930.5" y1="1251.188" y2="1251.188"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="73" x="1806" y="1246.3315">choose_impl</text><polygon fill="#A80036" points="392,1278.9424,382,1282.9424,392,1286.9424,388,1282.9424" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="386" x2="1935.5" y1="1282.9424" y2="1282.9424"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="121" x="398" y="1278.0859">create_primitive_impl</text><polygon fill="#A80036" points="2055,1310.6968,2065,1314.6968,2055,1318.6968,2059,1314.6968" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="381" x2="2061" y1="1314.6968" y2="1314.6968"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="36" x="388" y="1309.8403">create</text><polygon fill="#A80036" points="2198.5,1342.4512,2208.5,1346.4512,2198.5,1350.4512,2202.5,1346.4512" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="2067" x2="2204.5" y1="1346.4512" y2="1346.4512"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="92" x="2074" y="1341.5947">GetBestKernels</text><polygon fill="#A80036" points="2370.5,1388.0828,2380.5,1392.0828,2370.5,1396.0828,2374.5,1392.0828" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="2210.5" x2="2376.5" y1="1392.0828" y2="1392.0828"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="116" x="2217.5" y="1387.2263">GetNaiveBestKernel</text><path d="M2387,1359.4512 L2387,1404.4512 L2758,1404.4512 L2758,1369.4512 L2748,1359.4512 L2387,1359.4512 " fill="#ADD8E6" filter="url(#f1eybgueyhrd58)" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M2748,1359.4512 L2748,1369.4512 L2758,1369.4512 L2748,1359.4512 " fill="#ADD8E6" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="337" x="2393" y="1379.3491">reorder_kernel_selector inherits from kernel_selector_base</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="350" x="2393" y="1397.1035">this operation will find the best opencl kernel for current node</text><polygon fill="#A80036" points="392,1433.7144,382,1437.7144,392,1441.7144,388,1437.7144" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="386" x2="1532.5" y1="1437.7144" y2="1437.7144"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="99" x="398" y="1432.8579">compile_program</text><polygon fill="#A80036" points="2512.5,1465.4688,2522.5,1469.4688,2512.5,1473.4688,2516.5,1469.4688" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="381" x2="2518.5" y1="1469.4688" y2="1469.4688"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="47" x="388" y="1464.6123">build_all</text><polygon fill="#A80036" points="2627.5,1497.2231,2637.5,1501.2231,2627.5,1505.2231,2631.5,1501.2231" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="2524.5" x2="2633.5" y1="1501.2231" y2="1501.2231"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="88" x="2531.5" y="1496.3667">clBuildProgram</text><!--
@startuml
title LoadNetwork
app -> Core:LoadNetwork
Core -> clDNNEngine:LoadExeNetworkImpl
clDNNEngine -> engine_impl:
engine_impl -> register_gpu.cpp:register_implementations_gpu
note right #LightBlue
// Register all kernel 
end note
register_gpu.cpp->attach_activation_gpu:new
note right #LightBlue:Register all kernel


clDNNEngine -> CLDNNExecNetwork: new
CLDNNExecNetwork -> CLDNNGraph: new
CLDNNGraph -> Program:BuildProgram
note right #LightBlue: Create Program
Program -> Program: BuildProgram
note right #LightBlue
Create Program from network
// 1. create inputs
// 2. traverse layers
// 3. Handle output reordering
end note
Program -> topology:new

Program -> Program:AddInputPrimitive
Program -> topology:add_primitive
note right #LightBlue: Add input primitive to the topology
topology -> topology_impl:add

Program -> program:new
program -> engine_impl:build_program
engine_impl -> program_impl:build_program
note right #LightBlue
// Create graph for program then do graph optimization
void program_impl::build_program(bool is_internal) {
    init_graph();
    { pre_optimize_graph(is_internal); }
    run_graph_compilation();
    { post_optimize_graph(is_internal); }
    prepare_memory_dependencies();
    engine->compile_program(*this);

    if (!is_internal)
        prim_info = get_current_stage_info();

    cleanup();
}
end note
program_impl -> program_impl:run_graph_compilation
program_impl -> pass_manager:run
pass_manager -> compile_graph:run
note right #LightBlue
// 创建opencl kernel
void compile_graph::run(program_impl& p) {
    for (auto& node : p.get_processing_order()) {
        if (!node->is_type<internal_primitive>() && !node->is_type<data>()) {
            node->get_output_layout();
            if (!node->is_type<data>() && !(node->is_type<mutable_data>() && node->get_dependencies().empty())) {
                node->selected_impl = node->type()->choose_impl(p.get_engine(), *node);
            }
        }
    }
}
end note
compile_graph->primitive_type_base:choose_impl
primitive_type_base->engine_impl:create_primitive_impl
engine_impl->reorder_gpu:create
reorder_gpu->reorder_kernel_selector:GetBestKernels
reorder_kernel_selector->kernel_selector_base:GetNaiveBestKernel
note right #LightBlue
reorder_kernel_selector inherits from kernel_selector_base
this operation will find the best opencl kernel for current node
end note

program_impl-> engine_impl: compile_program
engine_impl -> kernels_cache:build_all
kernels_cache -> "opencl driver":clBuildProgram

@enduml

PlantUML version 1.2019.09(Tue Aug 27 00:19:51 CST 2019)
(GPL source distribution)
Java Runtime: Java(TM) SE Runtime Environment
JVM: Java HotSpot(TM) 64-Bit Server VM
Java Version: 1.8.0_151-b12
Operating System: Windows 10
OS Version: 10.0
Default Encoding: GBK
Language: zh
Country: CN
--></g></svg>